# Nextest configuration for Folio
# See: https://nexte.st/book/configuration.html

[profile.default]
# Run tests in parallel (default behavior)
test-threads = "num-cpus"

# Retry failed tests once to handle flaky tests
retries = 1

# Show output for failed tests
failure-output = "immediate"

# Show output for passing tests when running with --nocapture
success-output = "never"

# Slow tests threshold (warn if test takes longer than this)
slow-timeout = { period = "60s", terminate-after = 2 }

# Test execution timeout
[profile.default.junit]
path = "target/nextest/junit.xml"

[profile.ci]
# CI-specific settings for GitHub Actions, etc.
retries = 2
failure-output = "immediate-final"
success-output = "never"
slow-timeout = { period = "60s" }

# Fail fast in CI to save time
fail-fast = true
